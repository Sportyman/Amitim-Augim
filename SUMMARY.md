
# סיכום מצב פרויקט - Amitim Activity Finder

## 1. מטרת הפרויקט
הפרויקט הוא אפליקציית ווב מבוססת React לאיתור וסינון חוגים ופעילויות. האפליקציה כוללת סינון מתקדם לפי קטגוריות, מחיר, גיל ומיקום, וכן יכולת חיפוש "חכם" המבוססת על Gemini API להרחבת מונחי חיפוש. האפליקציה בנויה כאתר סטטי פשוט (ללא תהליך build מורכב), המשתמש ב-Babel לתרגום JSX/TSX ישירות בדפדפן.

## 2. הבעיה המרכזית שטופלה
האפליקציה עבדה באופן מושלם בסביבת הפיתוח המקומית, אך נכשלה בטעינה (הציגה "דף לבן") כאשר נפרסה לפלטפורמות כמו GitHub Pages ו-Vercel.

### אבחון הבעיה:
לאחר ניתוח, זוהו שתי סיבות שורש לכישלון:

1.  **שימוש בנתיבים אבסולוטיים (Absolute Paths):** בקוד המקורי, קריאות לקבצים חיוניים נעשו עם נתיב שמתחיל בקו נטוי (`/`), למשל:
    *   `index.html` טען את הסקריפט הראשי עם `<script src="/index.tsx">`.
    *   `App.tsx` טען את קובץ הנתונים עם `fetch('/public/activities.json')`.
    נתיבים אלו עובדים מקומית כי השרת מריץ את האתר מהשורש. בסביבות פריסה, במיוחד ב-GitHub Pages שהריץ את האתר מתת-תיקייה (`.../repo-name/`), הדפדפן חיפש את הקבצים במיקום הלא נכון וקיבל שגיאות 404.

2.  **תצורה שגויה ב-Vercel:** פרויקט ה-Vercel הוגדר עם `Framework Preset: Vite`. הגדרה זו גרמה ל-Vercel לנסות להריץ פקודות בנייה ספציפיות ל-Vite (`npm run build`), שלא קיימות בפרויקט שלנו, מה שהוביל לכישלון בתהליך הפריסה (Deployment).

## 3. הפתרונות שיושמו

1.  **תיקון מבנה ותהליך "בנייה" (`docs`):**
    *   תיקיית `docs`, המיועדת לפריסה ל-GitHub Pages, תוחזקה ידנית והכילה קבצים לא מעודכנים.
    *   **הפעולה שבוצעה:** בוצע סנכרון מלא של כל קבצי המקור (`.tsx`, `.ts`, `.json`) לתוך תיקיית `docs`. תהליך זה הפך את התיקייה ליעד בנייה (build target) אמיתי ועדכני.

2.  **מעבר לנתיבים יחסיים (Relative Paths):**
    *   זה היה התיקון המרכזי. כל הנתיבים האבסולוטיים בקוד שונו לנתיבים יחסיים, באמצעות הוספת `./` בתחילת הנתיב.
    *   `src="/index.tsx"` שונה ל-`src="./index.tsx"`.
    *   `fetch('/public/activities.json')` שונה ל-`fetch('./public/activities.json')`.
    *   השינוי בוצע בכל הקבצים הרלוונטיים, גם בתיקייה הראשית וגם בתיקיית `docs`, כדי להבטיח שהאפליקציה תעבוד בכל סביבת פריסה.

3.  **הנחיה לתיקון הגדרות Vercel:**
    *   המשתמש הונחה לשנות את הגדרות הפרויקט ב-Vercel:
        *   **Framework Preset:** מ-`Vite` ל-`Other`.
        *   **Build Command:** לעקוף (Override) ולהזין `echo "No build required"`.
        *   **Output Directory:** לעקוף (Override) ולהזין `.`.
    *   שינויים אלו מבטיחים ש-Vercel יתייחס לפרויקט כאתר סטטי פשוט ויגיש את הקבצים מהתיקייה הראשית ללא ניסיון לבצע בנייה.

## 4. סטטוס נוכחי והצעדים הבאים

*   **סטטוס:** הקוד תוקן ומוכן לפריסה. לאחר שהמשתמש יחיל את השינויים בהגדרות Vercel ויבצע פריסה מחדש, האפליקציה צפויה להיטען ולפעול כראוי גם ב-GitHub Pages וגם ב-Vercel.

*   **מגבלה ידועה וצעד הבא מומלץ:**
    *   השימוש ב-`process.env.API_KEY` בקוד ה-client-side הנוכחי **לא יאפשר** לפונקציונליות החיפוש החכם לעבוד בסביבת Vercel, מכיוון שמשתני סביבה של Vercel זמינים רק בצד השרת.
    *   **השלב הבא המומלץ:** כדי להפעיל את החיפוש החכם בצורה מאובטחת ויעילה, יש ליישם "פונקציה ללא שרת" (Serverless Function) ב-Vercel. הפונקציה תשמש כ-proxy: האפליקציה תקרא לפונקציה, והפונקציה (שפועלת בצד השרת של Vercel) תשתמש במפתח ה-API הסודי כדי לקרוא ל-Gemini API ותחזיר את התוצאה לאפליקציה.
