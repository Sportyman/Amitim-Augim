# סיכום מצב פרויקט - Amitim Activity Finder

## 1. מטרת הפרויקט
הפרויקט הוא אפליקציית ווב מבוססת React לאיתור וסינון חוגים ופעילויות. האפליקציה כוללת סינון מתקדם לפי קטגוריות, מחיר, גיל ומיקום, וכן יכולת חיפוש "חכם" המבוססת על Gemini API להרחבת מונחי חיפוש. האפליקציה בנויה כאתר סטטי פשוט (ללא תהליך build מורכב), המשתמש ב-Babel לתרגום JSX/TSX ישירות בדפדפן.

## 2. הבעיה המרכזית שטופלה
האפליקציה עבדה באופן מושלם בסביבת הפיתוח המקומית, אך נכשלה בטעינה (הציגה "דף לבן") כאשר נפרסה לפלטפורמות כמו GitHub Pages ו-Vercel.

### אבחון הבעיה:
הכשל נבע משילוב של שתי בעיות קריטיות:
1.  **קריסה עקב היעדר מפתח API:** הקוד ניסה לאתחל את Gemini API באופן מיידי. בסביבת הדפדפן, `process.env.API_KEY` אינו זמין, מה שגרם לאתחול ה-API להיכשל ולקריסה מוחלטת של כל האפליקציה לפני שהספיקה להציג תוכן כלשהו.
2.  **שימוש בנתיבים שגויים:** הקריאה לטעינת קובץ הנתונים `activities.json` השתמשה בנתיב שכלל את התיקייה `public` (`./public/activities.json`). בסביבות פריסה סטנדרטיות (כמו Vercel), התוכן של תיקיית `public` מוגש מהשורש, ולכן הנתיב הזה היה שגוי וגרם לשגיאת 404.

## 3. הפתרונות שיושמו

1.  **הפיכת קוד ה-API לחסין (Robust):**
    *   **הפעולה שבוצעה:** הקוד ב-`services/geminiService.ts` שונה כך שהוא בודק תחילה אם קיים מפתח API. אם לא, הוא מגדיר את שירות ה-AI כ-`null` ולא מנסה לאתחל אותו. בפונקציות המשתמשות ב-AI, נוספה בדיקה - אם השירות הוא `null`, הפונקציה מחזירה ערך ריק ומדפיסה הודעת אזהרה לקונסול, במקום לקרוס.
    *   **התוצאה:** האפליקציה יכולה לעלות ולפעול באופן מלא גם ללא מפתח API. פיצ'ר החיפוש החכם פשוט לא יפעל.

2.  **תיקון נתיב טעינת הנתונים:**
    *   **הפעולה שבוצעה:** הקריאה ב-`App.tsx` שונתה מ-`fetch('./public/activities.json')` ל-`fetch('./activities.json')`.
    *   **התוצאה:** הדפדפן יחפש את קובץ הנתונים בנתיב הנכון (`/activities.json`) ביחס לשורש האתר, מה שמבטיח טעינה מוצלחת ב-Vercel ובסביבות דומות.

3.  **הנחיה לתיקון הגדרות Vercel:**
    *   המשתמש הונחה לשנות את הגדרות הפרויקט ב-Vercel כדי להתאים לפרויקט סטטי פשוט:
        *   **Framework Preset:** מ-`Vite` ל-`Other`.
        *   **Build Command:** לעקוף (Override) ולהזין `echo "No build required"`.
        *   **Output Directory:** לעקוף (Override) ולהזין `.`.

## 4. סטטוס נוכחי והצעדים הבאים

*   **סטטוס:** הקוד תוקן באופן יסודי ומוכן לפריסה. לאחר שהמשתמש יחיל את השינויים בהגדרות Vercel ויבצע פריסה מחדש, האפליקציה צפויה להיטען ולפעול כראוי גם ב-GitHub Pages וגם ב-Vercel.

*   **מגבלה ידועה וצעד הבא מומלץ:**
    *   כדי להפעיל את החיפוש החכם ב-Vercel, יש צורך בצעד נוסף. כרגע, מפתח ה-API עדיין לא זמין בצד הלקוח.
    *   **השלב הבא המומלץ:** כדי להפעיל את החיפוש החכם בצורה מאובטחת ויעילה, יש ליישם "פונקציה ללא שרת" (Serverless Function) ב-Vercel. הפונקציה תשמש כ-proxy: האפליקציה תקרא לפונקציה, והפונקציה (שפועלת בצד השרת של Vercel) תשתמש במפתח ה-API הסודי כדי לקרוא ל-Gemini API ותחזיר את התוצאה לאפליקציה.